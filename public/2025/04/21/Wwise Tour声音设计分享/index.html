<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="" />
    <meta name="hexo-theme-A4" content="v1.9.7" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>段恺乐</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* 保持图片比例 */
                transition: transform 0.3s ease-in-out; 
                border-radius: 50%; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/favicon.webp" 
        />
        <div class="header-content">
            <a class="logo" href="/">段恺乐</a> 
            <span class="description">声音设计师丨音乐制作爱好者</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/works/">作品</a></li>
            
        
            
                <li><a href="/about/">关于</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>最近更新：2025-04-21</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>字数总计：4.7k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：16分钟</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        阅读量：<span id="busuanzi_value_page_pv"></span>次
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#title-%E6%B8%B8%E6%88%8F%E5%A3%B0%E9%9F%B3%E8%AE%BE%E8%AE%A1%E5%AD%A6%E4%B9%A0"><span class="post-toc-text">title&#x3D; 游戏声音设计学习</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9C%B0%E7%8B%B1%E4%B9%8B%E5%88%832%EF%BC%9A%E5%A1%9E%E5%A8%9C%E7%9A%84%E4%BC%A0%E8%AF%B4"><span class="post-toc-text">地狱之刃2：塞娜的传说</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Hybrid-breathing%E6%B7%B7%E5%90%88%E5%91%BC%E5%90%B8%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">Hybrid breathing混合呼吸设计</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87RTPC%E6%9D%A5%E6%8E%A7%E5%88%B6%E7%BA%BF%E6%80%A7%E6%B5%81%E7%A8%8B%E4%B8%AD%EF%BC%8C%E4%B8%8D%E5%90%8C%E9%98%B6%E6%AE%B5%E7%9A%84%E5%A3%B0%E9%9F%B3%E5%8F%98%E5%8C%96%E3%80%82"><span class="post-toc-text">可以通过RTPC来控制线性流程中，不同阶段的声音变化。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#RMS-Reading"><span class="post-toc-text">RMS Reading</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%B8%BA%E4%BA%86%E5%B8%A6%E6%9D%A5%E6%9B%B4%E6%B7%B1%E3%80%81%E9%9C%87%E6%92%BC%E7%9A%84%E6%83%85%E6%84%9F%E4%BD%93%E9%AA%8C%EF%BC%8C%E5%B0%86%E8%AF%AD%E9%9F%B3%E5%92%8C%E9%9F%B3%E4%B9%90%E6%8E%A8%E5%88%B0%E6%9C%80%E5%89%8D%E9%9D%A2%E6%98%AF%E4%B8%AA%E5%8F%AF%E9%80%89%E9%A1%B9%E3%80%82"><span class="post-toc-text">为了带来更深、震撼的情感体验，将语音和音乐推到最前面是个可选项。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Trition-Acoustics"><span class="post-toc-text">Trition Acoustics</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%B1%BD%E8%BD%A6%E5%BC%95%E6%93%8E%E5%A3%B0%E9%9F%B3%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">汽车引擎声音设计</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%BC%AB%E5%A8%81%E8%9C%98%E8%9B%9B%E4%BE%A02"><span class="post-toc-text">漫威蜘蛛侠2</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Mixing"><span class="post-toc-text">Mixing</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%80%BB%E7%BA%BF%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">总线设计</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%94%B5%E5%B9%B3%E6%A3%80%E6%B5%8B"><span class="post-toc-text">电平检测</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%8A%A8%E6%80%81%E5%9D%87%E8%A1%A1"><span class="post-toc-text">动态均衡</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%89%B9%E6%AE%8A%E7%9A%84%E4%BE%A7%E9%93%BE%E5%8E%8B%E7%BC%A9%E5%A4%84%E7%90%86%E5%A2%9E%E5%BC%BA%E6%89%93%E5%87%BB%E6%84%9F"><span class="post-toc-text">特殊的侧链压缩处理增强打击感</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%9F%8E%E5%B8%82%E5%A3%B0%E6%99%AF"><span class="post-toc-text">城市声景</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%8E%AF%E5%A2%83%E9%9F%B3"><span class="post-toc-text">环境音</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%BF%9C%E8%B7%9D%E7%A6%BB%E5%8C%BA%E5%9F%9F%E7%B3%BB%E7%BB%9F"><span class="post-toc-text">远距离区域系统</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="post-toc-text">性能优化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%86%85%E5%AD%98%E5%A4%84%E7%90%86"><span class="post-toc-text">内存处理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3D%E9%9F%B3%E9%A2%91%E6%B7%B7%E9%9F%B3%E4%B8%AD%E7%9A%84%E6%80%A7%E8%83%BD"><span class="post-toc-text">3D音频混音中的性能</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%80%BB%E4%BD%93CPU%E6%80%A7%E8%83%BD%E8%A1%A8%E7%8E%B0"><span class="post-toc-text">总体CPU性能表现</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%B0%B8%E5%8A%AB%E6%97%A0%E9%97%B4%E6%89%8B%E6%B8%B8%E7%A7%BB%E6%A4%8D"><span class="post-toc-text">永劫无间手游移植</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%A7%BB%E6%A4%8D"><span class="post-toc-text">移动端移植</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Wwise%E5%86%85%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88"><span class="post-toc-text">Wwise内优化方案</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96"><span class="post-toc-text">内存优化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-1"><span class="post-toc-text">性能优化</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%A9%BA%E9%97%B4%E9%9F%B3%E9%A2%91"><span class="post-toc-text">移动端空间音频</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%B7%B7%E5%93%8D"><span class="post-toc-text">混响</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%8F%8D%E5%B0%84"><span class="post-toc-text">反射</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E9%98%BB%E6%8C%A1%EF%BC%88obstacle%EF%BC%89"><span class="post-toc-text">阻挡（obstacle）</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%A9%BA%E9%97%B4%E9%9F%B3%E9%A2%91%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="post-toc-text">空间音频的实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%A6%81%E7%B4%A0Feature"><span class="post-toc-text">要素Feature</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="post-toc-text">系统设计</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%BC%98%E5%8C%96"><span class="post-toc-text">实现优化</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dobly-atmos%E6%8E%A5%E5%85%A5"><span class="post-toc-text">dobly atmos接入</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9C%B0%E7%8B%B1%E6%BD%9C%E5%85%B52%E6%B8%B8%E6%88%8F%E6%B7%B7%E9%9F%B3"><span class="post-toc-text">地狱潜兵2游戏混音</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%A3%B0%E9%9F%B3%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E8%AE%BE%E5%AE%9Aby-HDR%EF%BC%88High-Dynamic-Range%EF%BC%89"><span class="post-toc-text">声音的优先级设定by HDR（High Dynamic Range）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HDR%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="post-toc-text">HDR的基础知识</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%93%88%E5%88%A9%E6%B3%A2%E7%89%B9%C2%B7%E9%AD%94%E6%B3%95%E8%A7%89%E9%86%92"><span class="post-toc-text">哈利波特·魔法觉醒</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%98%9F%E7%90%83%EF%BC%9A%E9%87%8D%E5%90%AF"><span class="post-toc-text">星球：重启</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%B7%85%E5%B3%B0%E6%9E%81%E9%80%9F"><span class="post-toc-text">巅峰极速</span></a></li></ol>
            
        
        <div class=".article-gallery"><hr>
<h2 id="title-游戏声音设计学习"><a href="#title-游戏声音设计学习" class="headerlink" title="title&#x3D; 游戏声音设计学习"></a>title&#x3D; 游戏声音设计学习</h2><h2 id="地狱之刃2：塞娜的传说"><a href="#地狱之刃2：塞娜的传说" class="headerlink" title="地狱之刃2：塞娜的传说"></a>地狱之刃2：塞娜的传说</h2><h3 id="Hybrid-breathing混合呼吸设计"><a href="#Hybrid-breathing混合呼吸设计" class="headerlink" title="Hybrid breathing混合呼吸设计"></a>Hybrid breathing混合呼吸设计</h3><p>在自由度高的地方，采用非线性的程序设计呼吸（设置state等进行切换）；<br>在线性化的叙事流程中（例如实时渲染的动画），采用线性的录制的呼吸声，在演员录制动捕的时候进行同期录音。<br>通过在SEQUENCE中添加marker点，marker触发后，会播放线性的声音，播放结束后会进入程序性的声音，直到触发下一个marker。</p>
<h3 id="可以通过RTPC来控制线性流程中，不同阶段的声音变化。"><a href="#可以通过RTPC来控制线性流程中，不同阶段的声音变化。" class="headerlink" title="可以通过RTPC来控制线性流程中，不同阶段的声音变化。"></a>可以通过RTPC来控制<strong>线性流程</strong>中，不同阶段的声音变化。</h3><h3 id="RMS-Reading"><a href="#RMS-Reading" class="headerlink" title="RMS Reading"></a>RMS Reading</h3><p>通过监测Ambience 的RMS值，来控制dialogue的值，然后再反过来控制对话对ambience 的duck值。</p>
<h3 id="为了带来更深、震撼的情感体验，将语音和音乐推到最前面是个可选项。"><a href="#为了带来更深、震撼的情感体验，将语音和音乐推到最前面是个可选项。" class="headerlink" title="为了带来更深、震撼的情感体验，将语音和音乐推到最前面是个可选项。"></a>为了带来更深、震撼的情感体验，将语音和音乐推到最前面是个可选项。</h3><h3 id="Trition-Acoustics"><a href="#Trition-Acoustics" class="headerlink" title="Trition Acoustics"></a>Trition Acoustics</h3><p>Project Acoustics基于Triton技术,这是一个先进的声学模拟引擎,能够处理复杂的三维空间中的声音传播和反射。<br>支持Untiy\Unreal以及wwise.</p>
<h2 id="汽车引擎声音设计"><a href="#汽车引擎声音设计" class="headerlink" title="汽车引擎声音设计"></a>汽车引擎声音设计</h2><p><a target="_blank" rel="noopener" href="https://www.audiokinetic.com/zh/blog/loop-based-car-engine-design-with-wwise-part-1/">https://www.audiokinetic.com/zh/blog/loop-based-car-engine-design-with-wwise-part-1/</a></p>
<h2 id="漫威蜘蛛侠2"><a href="#漫威蜘蛛侠2" class="headerlink" title="漫威蜘蛛侠2"></a>漫威蜘蛛侠2</h2><h3 id="Mixing"><a href="#Mixing" class="headerlink" title="Mixing"></a>Mixing</h3><h4 id="总线设计"><a href="#总线设计" class="headerlink" title="总线设计"></a>总线设计</h4><p>非必要情况下，不会添加新的总线，会让整体局面更复杂。<br>以减法为主，极少做加法<br>创建总线的一些情境：</p>
<ul>
<li>state\RTPC。控制一组声音的音量或者其他参数</li>
<li>动态EQ\混音。有时候为了针对不同的频段做动态均衡。</li>
<li>压缩\效果</li>
<li>发声数限制。为了去限制一个组别的发声数量。</li>
<li>电平检测。为了对一些内容进行检测。</li>
<li>总线配置差异化。某一组的音频需要做特殊的效果。</li>
<li>是否暂停。是否需要暂停某些音频。</li>
<li>不用于静态音量差异。总线上的音量尽可能保持默认。</li>
</ul>
<h4 id="电平检测"><a href="#电平检测" class="headerlink" title="电平检测"></a>电平检测</h4><p>检测的电平值本身的意义不是特别大，主要是利用meter值去进行其他操作。<br>例如对白，会分别检测总的，以及低中高三个频段的电平值。</p>
<h3 id="动态均衡"><a href="#动态均衡" class="headerlink" title="动态均衡"></a>动态均衡</h3><p>通过电平检测值实现。<br>主要应用场景：</p>
<ul>
<li>对白 优先于 音乐<br><a href="/image/image-20250215162814914.png" title="image-20250215162814914" class="gallery-item" style="box-shadow: none;"> <img src="/image/image-20250215162814914.png" alt="image-20250215162814914"></a>![image-20250215162814960]</li>
<li>对白 优先于 音效</li>
<li>战斗音效和关键音效 优先于 环境音效和非关键音效</li>
<li>战斗音效和关键音效 优先于 音乐</li>
<li>音乐 优先于 环境音</li>
<li>音乐 优先于 非关键音效</li>
</ul>
<h4 id="特殊的侧链压缩处理增强打击感"><a href="#特殊的侧链压缩处理增强打击感" class="headerlink" title="特殊的侧链压缩处理增强打击感"></a>特殊的侧链压缩处理增强打击感</h4><p>通过减法增强效果。<br>通过战斗音效的电平检测，来降低对应混响的音量，以达到增强打击感的效果。</p>
<h3 id="城市声景"><a href="#城市声景" class="headerlink" title="城市声景"></a>城市声景</h3><p>城市声音景观组成：<br>第一部分（可见的）：环境点声源、行人、载具、其他变量（天气或者犯罪事件）<br>第二部分（不见的）：环境音基调，远距离区域声音，海岸线\水面声音</p>
<h4 id="环境音"><a href="#环境音" class="headerlink" title="环境音"></a>环境音</h4><p>每个不同的区域有独特的环境音基调；<br>需要大体积声源；<br>内容随高度进行声响摆位。(在高处时，声音大部分在下面，通过RTPC控制。<br>)</p>
<h4 id="远距离区域系统"><a href="#远距离区域系统" class="headerlink" title="远距离区域系统"></a>远距离区域系统</h4><p>中远距离环境音，中远两个距离分别有5个发声点环绕着玩家，与玩家保持固定的偏移，只检测了水平的距离。（无论你高度如何，中远距离环境音不会改变）<br>具体的声音内容通过State和RTPC进行调整。例如，水上的监测点则不会发出声音。<br>DDS屏蔽值（shelter value）<br>点声源与听者的屏蔽程度，从听者向DDS点声源进行射线检测，仅作用于水平面。<br>邻近区域<br>海岸线周边样条曲线，在曲线上播放海水拍打音效</p>
<h4 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h4><ul>
<li>转码设置<br>ATRAC9解码：索尼的PS解码器，压缩比很不错，但是文件体积很大<br> 硬件解码：所有声音<br> 软件解码\CPU：Wwise内容<br>WEM Opus解码：压缩比更大，且文件质量也有保证，但会超出硬件解码预算，导致部分音频不会被播放。<br> 硬件解码：所有声音<br> 软件解码\CPU：Wwise内容<br>Vobis解码：只用vorbis超出CPU预算。<br> 硬件解码：无<br> 软件解码\CPU：Wwise内容、所有声音</li>
</ul>
<p>最终采用组合解码的方式，改善了内存与磁盘的使用空间，音频保真度没有妥协，根据声音类型进行解码方式选择sharesets：<br>Ambience_Beds<br>Ambience_Default<br>Ambience_Rain<br>CHR_Default<br>Cine_Atmos<br>Cine_Default<br>Cine_Dialogue<br>CS_Default<br>Default<br>Dialog Default<br>Dialog Screen Reader<br>Foley_Cloth_Footsteps<br>Foley_Water<br>Hero_Abilities<br>LFE_Discrete<br>Haptics_Default<br>Music_Default<br>NPC_Weapons&amp;Attack<br>Objects_General<br>Objects_Physics<br>UI_HUD<br>Vehicles<br>Vehicles Engines<br>Walla Default<br>Weapons<br>Weapons_Tails</p>
<p>ATRAC9：短音效、数量少的声音 - UI、物品、打斗、技能等<br>WEM Opus：长文件、数量多的 - 对白音乐、环境、CG贴片等<br>Vorbis：可能会同时大量播放的 - 载具，雨声等</p>
<ul>
<li>流播放<br>音频的流播放（Streaming） 是一种动态加载和播放音频资源的技术。其核心思想是：不一次性将整个音频文件加载到内存中，而是在播放过程中按需从存储设备（如硬盘、SSD）逐块读取音频数据，边读取边播放。这一技术主要用于处理大型音频文件（如背景音乐、长对话、环境音效等），以优化内存使用和性能。</li>
</ul>
<blockquote>
<p>流播放的工作原理<br><strong>分段加载</strong>：<br>音频文件被分成多个小数据块（chunks），播放时仅加载当前需要播放的部分到内存缓冲区。<br><strong>动态缓冲</strong>：<br>在播放过程中，后台持续从存储设备读取后续数据块，填充到内存缓冲区，确保播放的连续性。<br><strong>内存释放</strong>：<br>已播放完的数据块会被及时释放，避免内存占用过高。</p>
</blockquote>
<p>为什么需要流播放？<br><strong>节省内存</strong>：<br>大型音频文件（如长达数分钟的背景音乐）直接加载到内存会占用大量空间，流播放仅保留当前播放的片段。<br><strong>支持大文件</strong>：<br>适用于开放世界游戏、电影化叙事游戏中需要长时间播放的高质量音频。<br><strong>动态内容切换</strong>：<br>支持无缝切换不同音频片段（如根据游戏场景动态调整环境音效）。<br><strong>减少加载延迟</strong>：<br>无需等待整个文件加载完成即可开始播放。</p>
<blockquote>
</blockquote>
<p>流播放的典型应用场景<br><strong>背景音乐（BGM）</strong>：<br>长时播放的高保真音乐，尤其适用于开放世界或剧情驱动的游戏。<br><strong>语音对话</strong>：<br>角色长篇对话或剧情旁白，避免一次性加载数百MB的语音文件。<br><strong>环境音效</strong>：<br>持续的风声、雨声、城市噪音等动态环境音效。<br><strong>动态音乐系统</strong>：<br>根据玩家行为实时混合不同音轨（如战斗音乐过渡到探索音乐）。</p>
<blockquote>
</blockquote>
<p>流播放的优缺点<br><strong>优点</strong>：<br>显著降低内存占用。<br>支持超大音频文件（如数十分钟的音乐）。<br>灵活应对动态内容需求（如随机事件触发的音效）。<br><strong>缺点</strong>：<br>增加磁盘I&#x2F;O压力，可能影响性能（需优化读取策略）。<br>需要管理缓冲区，防止播放中断（如硬盘速度不足时）。<br>对音频格式有要求（需支持分段解码，如.wav、.ogg等流式编码格式）。</p>
<blockquote>
</blockquote>
<p>实现流播放的关键技术<br><strong>音频中间件支持</strong>：<br>Wwise、FMOD等工具提供流播放接口，简化开发流程。<br>例如在FMOD中使用 FMOD_CREATESTREAM 标志创建流式音频。<br><strong>引擎集成</strong>：<br>Unity通过 AudioClip 的 LoadType 设置为 Streaming 实现。<br>Unreal Engine 通过 Sound Wave 的 Streaming 选项启用。<br><strong>数据预读取与缓冲</strong>：<br>设置合理的缓冲区大小，平衡内存占用和读取频率。<br>使用多线程避免主线程卡顿。</p>
<p>File Packager 负责将启用了流播放（Streaming）的 音频文件 打包成外部文件（如 .pck 或 .bnk），这些文件独立于 SoundBank 存在。<br>  实际音频数据（如 .wav、.ogg 文件）。<br>  流播放所需的块（Chunk）索引信息。<br>运行时功能：<br>游戏通过 Wwise 引擎直接从这些外部包中按需加载音频数据块，实现流播放。</p>
<p>SoundBank 主要存储的是 音频事件的逻辑定义 和 音频资源的元数据，例如：<br>事件（Events）和动作（Actions）。<br>  音频对象的结构（如容器、随机播放规则、混合总线参数）。<br>  非流式音频数据（如果音频未启用流播放，则音频文件会被直接打包进 SoundBank）。<br>对流式音频文件的引用（如果音频启用了流播放，SoundBank 仅存储其路径和元数据，而非实际音频数据）。</p>
<h4 id="内存处理"><a href="#内存处理" class="headerlink" title="内存处理"></a>内存处理</h4><p>减少运行内存的占用</p>
<ul>
<li>从soundbank中移除未使用的音频内容<br>很多结构化的数据并没有被实际运用。</li>
<li>重构复杂的大型的switch容器，可以减少内存的占用</li>
</ul>
<h4 id="3D音频混音中的性能"><a href="#3D音频混音中的性能" class="headerlink" title="3D音频混音中的性能"></a>3D音频混音中的性能</h4><p>EQ并不适用于音频对象<br>3D音频对象会大幅提升CPU的使用率<br>将音频对象留给某些特定的声音，例如环境声或者敌人。<br>3D Audio Bed Mixer plugin会节约大量内存。</p>
<h4 id="总体CPU性能表现"><a href="#总体CPU性能表现" class="headerlink" title="总体CPU性能表现"></a>总体CPU性能表现</h4><p>减少API调用。<br>在不需要时动态bypass掉插件或者提前离线渲染好。<br>先提前管理好声音的数目，再进入WWise，不要过度依赖于playback objects limits。<br>Wwise中设置目标平台的最大发声数。例如一百个。<br>好好利用Wwise的profiler，来进行性能分析。</p>
<h2 id="永劫无间手游移植"><a href="#永劫无间手游移植" class="headerlink" title="永劫无间手游移植"></a>永劫无间手游移植</h2><h3 id="移动端移植"><a href="#移动端移植" class="headerlink" title="移动端移植"></a>移动端移植</h3><h4 id="Wwise内优化方案"><a href="#Wwise内优化方案" class="headerlink" title="Wwise内优化方案"></a>Wwise内优化方案</h4><ul>
<li>手机端采样率是36K以及24K。</li>
<li>过长的音频文件采样streaming加载。需要结合限制同时播放音频数量以及设置加载优先级，以防止手机的I&#x2F;O性能过载。</li>
<li>资源合并删减，简化structure。、</li>
<li>Bank拆分。（将3p的资源进行了删减和优化）</li>
</ul>
<h4 id="内存优化"><a href="#内存优化" class="headerlink" title="内存优化"></a>内存优化</h4><ul>
<li>用量与I\O：用量过低会导致IO更为频繁，因此需要平衡</li>
<li>Soundbank：进行评估，是否继续引用或者进行卸载</li>
<li>动静态分离：UI、脚步声等需要常驻的Bank,即使处于离线也不会被卸载</li>
<li>LRU：根据内存情况，动态的可以卸载掉被评估的，不被需要（不重要）的bank</li>
<li>内存分配器：在RPmalloc上做分级机制，对老的手机进行更多优化等操作</li>
</ul>
<h4 id="性能优化-1"><a href="#性能优化-1" class="headerlink" title="性能优化"></a>性能优化</h4><ul>
<li>复用对象池，减少不必要的重建</li>
<li>Tick rate策略：对object的更新是基于优先级，例如距离或者重要度等，有的是每帧更新，有的可能5帧才更新一次。</li>
<li>sample rate：采样率下采。部分机型对音频质量要求高，当发现你采样率下调之后，会自己上采样，增加功耗。</li>
<li>梯度计算：评估某个声音是否需要继续计算，如果不需要则直接打回。某些游戏会继续渲染但保持音量为0.</li>
<li>利用temporal，小核心，多线程。主核心留给大处理。</li>
</ul>
<h3 id="移动端空间音频"><a href="#移动端空间音频" class="headerlink" title="移动端空间音频"></a>移动端空间音频</h3><h4 id="混响"><a href="#混响" class="headerlink" title="混响"></a>混响</h4><p>实时混响：覆盖全地图建筑结构，Matrix Reverb + ReverbTime\Reverb Energy RTPC<br>卷积混响：表现特征空间，如落日寺，自研卷积混响插件、游戏场景的卷积采样、特定区域触发</p>
<blockquote>
<p>卷积混响<br>就是在真实场景采集到的脉冲信号（IR），能够更真实的还原场景空间特征。</p>
</blockquote>
<h4 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h4><ul>
<li>通用反射：通过程序实时计算到的反射点、反射参数、播放生成的反射source并控制播放。</li>
<li>室外尾音：在反射点播放尾音的样本，并通过RPTC控制尾音大小，可与通用反射叠加。</li>
<li>特殊区域尾音：例如峡谷，需要在山谷两头播放尾音。</li>
</ul>
<h4 id="阻挡（obstacle）"><a href="#阻挡（obstacle）" class="headerlink" title="阻挡（obstacle）"></a>阻挡（obstacle）</h4><p>为了节省手机性能，只判断了敌我之间是否有障碍物。损失频段但不损失音量（与视觉提示相配合）。</p>
<h3 id="空间音频的实现"><a href="#空间音频的实现" class="headerlink" title="空间音频的实现"></a>空间音频的实现</h3><p>不与基础音频管线耦合。手游音频开发首要目标是项目能运行跑起来，而音频效果的表现优化是在其后面的，因此不能与基础音频管线冲突或者有关联。<br>开销小并且稳定。在不同机型上都能有稳定的表现。<br>核心：生成一个与游戏内容实时匹配的AudioScene,在audioscene里面计算模拟最终描述空间音频渲染所需要的数据。</p>
<h4 id="要素Feature"><a href="#要素Feature" class="headerlink" title="要素Feature"></a>要素Feature</h4><p>早期反射、后期混响、尾音</p>
<p>现成技术方案：</p>
<ul>
<li>离线<br>体素：离线写死的方案不适合会实时变动的场景。会过度运算（overdraw）<br>Probe与体素类似，但优化会好一些。<br>trigger：场景过大，挂接过于繁杂。</li>
<li>实时<br>几何、波动</li>
</ul>
<p>早期反射参数需求：反射距离、反射强度、瞬态性<br>后期混响参数需求：RT60、空间复杂度<br>尾音参数需求：空间开放度</p>
<p>最终采用方案：<br>基于icosphere体投影构建一阶声学空间<br>相较于体素，不会overdraw，计算更为高效。</p>
<p>体投影优势：<br>每个面彼此独立，可以利用多线程<br>根据算力的优先级程度可以分配不同朝向的算力分配，也就是面可以细分或者退化。</p>
<p>icosphere优势：<br>可以分割出top、bottom、middle三个部分。</p>
<h4 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h4><p>系统优化：<br>所有计算job化：对于多线程计算任务的抽象。会给每个job分配最低权重，强制让其到小核心运行。<br>利用temporal；<br>无效的job剔除；<br>算法优化：<br>halton-sequence替代random。<br>三角形索引。<br>不规则体积估算。</p>
<p>运行框架：</p>
<p>![屏幕截图 2025-02-17 181103](images&#x2F;屏幕截图 2025-02-17 181103.png)</p>
<h4 id="实现优化"><a href="#实现优化" class="headerlink" title="实现优化"></a>实现优化</h4><p>简化曲线<br>使用ringbuffer实现早期反射：<br> 内存可控：按照最远反射距离30m，48KHZ算≈0.017MB<br> 开销：取决于最大echo数量，手游是三个。<br>Ringbuffer按需激活：<br>最多用三个反射的Emitter 表现全部早反：左右中</p>
<p>复杂场景：采用trigger</p>
<h3 id="dobly-atmos接入"><a href="#dobly-atmos接入" class="headerlink" title="dobly atmos接入"></a>dobly atmos接入</h3><p>按照wwise官方说明书进行。<br>设计考量，将战斗音效接入atmos，其他音乐环境音效走passthrough，避免影响战斗中的声音。</p>
<h2 id="地狱潜兵2游戏混音"><a href="#地狱潜兵2游戏混音" class="headerlink" title="地狱潜兵2游戏混音"></a>地狱潜兵2游戏混音</h2><h3 id="声音的优先级设定by-HDR（High-Dynamic-Range）"><a href="#声音的优先级设定by-HDR（High-Dynamic-Range）" class="headerlink" title="声音的优先级设定by HDR（High Dynamic Range）"></a>声音的优先级设定by HDR（High Dynamic Range）</h3><ul>
<li><p>需要解决的问题-掩蔽<br>很多声音同时播放，重要的声音听不清楚（掩蔽效应）<br>解决办法：闪避系统ducking<br>地狱潜兵中，采用HDR，设置优先级：确定哪种声音更重要？<br>爆炸声可能比较大，但是附近敌人的声音更重要。——响度≠重要性。</p>
</li>
<li><p>优先级设定<br>首先，将声音进行分类，详细程度可以视情况而定。<br>优先级映射：什么声音对玩家比较重要，由低到高进行排序。并且，排序低并不代表不重要，而是相对不重要而已。<br>根据游戏声音分类和优先级排序，进行声音闪避系统设计。</p>
</li>
</ul>
<h3 id="HDR的基础知识"><a href="#HDR的基础知识" class="headerlink" title="HDR的基础知识"></a>HDR的基础知识</h3><p>详情参见wwise手册。</p>
<ul>
<li>逻辑音量值-total volume&#x3D;voice volume +output bus volume +bus volume</li>
<li>对于HDR来说， total volume越高，优先级就越高。</li>
<li>两个及以上的声音在播放时，优先级高的会对低的进行压低。</li>
<li>闪避幅度：等于两个声音total volume 差值。</li>
<li>包络：每种声音都指定了HDR包络。利用高优先级的声音对低优先级的声音做闪避处理（就像独立的sidechain）。</li>
</ul>
<h2 id="哈利波特·魔法觉醒"><a href="#哈利波特·魔法觉醒" class="headerlink" title="哈利波特·魔法觉醒"></a>哈利波特·魔法觉醒</h2><ul>
<li>抽卡音效设计<br>在抽卡中，根据抽卡出的物品材质不同，也会进行细分，而不仅仅只根据卡牌的稀有度。<br>在抽卡过程中，根据卡片出现的摆放的位置，也会做pan的变化。</li>
<li>魔杖&#x2F;物品展示音效设计<br>层级：写实层&#x2F;材质层 + 乐音层 + 特征层</li>
<li>节日音频设计<br>强化节日的音频特色元素。</li>
<li>魔法地图声音景观设计<br>为2D的地图，设计3D的景观。</li>
<li>puredata+heavy开发的音频混响插件，可以节省音频package的大小。</li>
<li>IP价值的利用最大化。语音设计中，贴近原著影片声线。</li>
<li>创意设计，丰富玩家个性化。兴奋性需求奖励的道具（一开始不抱有期待，但一旦满足则会充满惊喜.）节假日，融入音频设计。中国传统节日，根据现实时间，实现不同声音效果。细节设计上满足玩家的收集欲。时装设定。</li>
<li><strong>音频开发从玩家的需求产生</strong>，去开发对应的技术。例如，自定义咒语系统；wWISE AUDIO INPUT可以使用外部音频&#x2F;话筒；从其他音乐平台获取音频串流-音乐电台。</li>
<li>音乐电台流程：流媒体平台API - 给出请求清单 - 返回清单获取地址 - …</li>
</ul>
<h2 id="星球：重启"><a href="#星球：重启" class="headerlink" title="星球：重启"></a>星球：重启</h2><p>表现力与性能的均衡与取舍：最大限度地提升单位资源的音频表现力。<br>环境声交互性：全景声的下混，俯仰角的环境声发生变化。仰角-天空；俯角-地。</p>
<ul>
<li>载具声音的实现</li>
<li>动态混音：精细化音频-与玩法是否有关等<br>需要提前同意音频的标准，优先级，音频播放数量等。<br>响度设置-不仅仅是音频样本，还包括Wwise中的音频响度。<br>动态混音可以较早的介入整体音频开发，早期可以粗糙一些，这样可以暴露很多问题</li>
<li>分机型测试-安卓与苹果的区别。</li>
</ul>
<p>-音频程序部分</p>
<h2 id="巅峰极速"><a href="#巅峰极速" class="headerlink" title="巅峰极速"></a>巅峰极速</h2><ul>
<li><p>车辆运动的声音构成：先进行细分，再部分进行整合。</p>
</li>
<li><p>车辆录制流程：发起录音-预约车辆（私人车主&#x2F;汽车厂商…）-预约场地-进行录制（赛场跑道录制或者室内马力机录制）。麦克风可承受声压级要大。</p>
</li>
<li><p>轮胎声音的录制。轮胎声音的分类。录制中，赛道漂移音色区别大，定圆漂移稳定的LOOP声。录制过久，轮胎会被磨平，音色会有差异。选择电车（避免排气、引擎等声音的干扰），选择后驱，更好漂移。</p>
</li>
<li><p>轮胎声音后期处理问题：一个样本还是多个样本（性能与表现的取舍）；随机样本还是粒子合成（sound seed grain）。轮胎与地面材质。</p>
</li>
<li><p>录音方案的选择：<br>XY立体声、double MS多通道：近咪芯收音，无相位问题，便于后期处理。<br>ORTF立体声：接近人耳的听觉感受，用于CG制作。<br>枪麦录制：补充点声源。</p>
</li>
<li><p>音乐与交互音乐<br>文化与节奏感。</p>
</li>
</ul>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2025-04-21</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2025/04/21/C#%E5%AD%A6%E4%B9%A0/"></a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            © 2002-2025 Carol 

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>🌊看过大海的人不会忘记海的广阔🌊</span>
            
                <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>